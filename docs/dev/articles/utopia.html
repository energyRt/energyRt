<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Utopia: the testing model • energyRt</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Utopia: the testing model">
<meta name="robots" content="noindex">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-CYBYJ238Q5"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CYBYJ238Q5');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">energyRt</a>

    <small class="nav-text text-info me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.49.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/model.html">energyRt model framework</a></li>
    <li><a class="dropdown-item" href="../articles/utopia.html">Utopia: the testing model</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/energyRt/energyRt/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Utopia: the testing model</h1>
            <h3 data-toc-skip class="subtitle">(transitional/interim
version)</h3>
            
            <h4 data-toc-skip class="date">2024-08-29</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/energyRt/energyRt/blob/HEAD/vignettes/utopia.Rmd" class="external-link"><code>vignettes/utopia.Rmd</code></a></small>
      <div class="d-none name"><code>utopia.Rmd</code></div>
    </div>

    
    
<div style="page-break-after: always;"></div>
<div class="section level2">
<h2 id="intoduction">Intoduction<a class="anchor" aria-label="anchor" href="#intoduction"></a>
</h2>
<p><em>[The example model in the repository is fully functional, the
text and parts of code might be obsolete - the update is in
progress]</em><br>
This tutorial demonstrates the application of <code>energyRt</code>
package to develop a <strong>Reference Energy System</strong> (RES, or
<strong>Energy system optimization</strong>) model and conduct standard
analysis, i.e. run scenarios, optimize several alternative development
pathways of the simplified energy system. The initial (base-year)
structure of the discussed below example of RES is flexible. The
following features can be easily adjusted:<br>
* number of regions and the model GIS-info (the <em>map</em>),<br>
* the model horizon and annual time-steps (“milestone years”),<br>
* number and levels of sub-annual time-steps (“time slices”),<br>
* technological options, commodities, storage, supply, and demand,<br>
* interregional trade and trade with the rest of the world (ROW),<br>
* constraints on the model variables.</p>
<p>The <code>energyRt</code> package provides a set of S4 classes,
methods, and functions to design the model elements, such as
technologies, commodities, supply, demand, and constraints, save them in
a <code>model</code> object, process the data and save it in a format
readable by solver-software (GAMS, GLPK/Mathprog, Python/Pyomo, or
Julia/JuMP), run the model code in the solver-software, read the results
back to R, and manipulate the data to produce charts and tables.</p>
<p>This Vignette tutorial can be acquired from the
<code>energyRt/vignetts</code> folder (or <a href="https://github.com/energyRt/energyRt/vignettes" class="external-link uri">https://github.com/energyRt/energyRt/vignettes</a>). It can
be run step-by-step or at once to reproduce the results below. Playing
with parameters and data is highly recommended for learning the package
and the RES-models. This is the first beta-version of the package and
the tutorial. Please report bugs, issues, thoughts here: <a href="https://github.com/energyRt/energyRt/issues" class="external-link uri">https://github.com/energyRt/energyRt/issues</a>.</p>
</div>
<div class="section level2">
<h2 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h2>
<p>We assume that <code>R</code> (<a href="https://www.r-project.org/" class="external-link uri">https://www.r-project.org/</a>) and <code>RStudio</code> (<a href="https://www.rstudio.com/" class="external-link uri">https://www.rstudio.com/</a>) has been already installed,
and a scholar has some basic knowledge of <code>R</code>. The next step
is to have installed <code>energyRt</code>, the solver software
(<code>GAMS</code> or <code>GLPK</code>) and <code>LaTeX</code>. The
detailed installation steps are available on the package website (<a href="https://github.com/energyRt/energyRt/" class="external-link uri">https://github.com/energyRt/energyRt/</a>).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"energyRt"</span><span class="op">)</span> <span class="op">&lt;</span> <span class="st">"0.49.1"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"\nPlease install the latest version of energyRt package.\n"</span>,</span>
<span>       <span class="st">'devtools::install_github("energyRt/energyRt", ref = "dev")'</span><span class="op">)</span></span>
<span>  <span class="co"># devtools::install_github("energyRt/energyRt", ref = "v0.50")</span></span>
<span><span class="op">}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://energyRt.org">energyRt</a></span><span class="op">)</span></span>
<span><span class="co"># devtools::load_all(".")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org" class="external-link">scales</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set color palette for figures</span></span>
<span><span class="co"># palette(RColorBrewer::brewer.pal(11, "Paired"))</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/palette.html" class="external-link">palette</a></span><span class="op">(</span><span class="fu">RColorBrewer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html" class="external-link">brewer.pal</a></span><span class="op">(</span><span class="fl">11</span>, <span class="st">"Set3"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="utopia-map">Utopia map<a class="anchor" aria-label="anchor" href="#utopia-map"></a>
</h2>
<p>Let’s start with a multi-region map for the model. Below we use GIS
info of this imaginary country for visualization of results and also to
calculate some parameters for renewables, like solar radiation, and
distances between regions. Several options of 11-region map with
arbitrary GIS info is saved in <code>energyRt/data</code> folder and
compared on the figure below.</p>
<div class="section level3">
<h3 id="available-options">Available options<a class="anchor" aria-label="anchor" href="#available-options"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">maps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">utopia</span><span class="op">$</span><span class="va">map</span><span class="op">)</span></span>
<span><span class="va">par_default</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>no.readonly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">utopia</span><span class="op">$</span><span class="va">map</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="st">"region"</span><span class="op">]</span><span class="op">)</span>, </span>
<span>       main <span class="op">=</span> <span class="va">maps</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, </span>
<span>       bg <span class="op">=</span> <span class="st">"aliceblue"</span>, </span>
<span>       col <span class="op">=</span> <span class="fu">RColorBrewer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html" class="external-link">brewer.pal</a></span><span class="op">(</span><span class="fl">11</span>, <span class="st">"Set3"</span><span class="op">)</span>,</span>
<span>       key.pos <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>       reset <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="va">par_default</span><span class="op">)</span></span></code></pre></div>
<p>Certainly, any other map in <code>SpatialPolygonsDataFrame</code>
(spdf) format and with saved names of regions in
<code>@data$region</code> column of the spdf object can be used instead.
For this particular example lets pick <code>utopia_honeycomb</code> map
and keep the <code>7</code> first regions for the simulation.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># data("utopia_honeycomb") # , package = "energyRt")</span></span>
<span><span class="va">gis</span> <span class="op">&lt;-</span> <span class="va">utopia</span><span class="op">$</span><span class="va">map</span><span class="op">$</span><span class="va">honeycomb</span></span>
<span><span class="va">gis</span> <span class="op">&lt;-</span> <span class="va">gis</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span>,<span class="op">]</span></span>
<span></span>
<span><span class="co"># Often used parameters</span></span>
<span><span class="va">reg_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">gis</span><span class="op">$</span><span class="va">region</span><span class="op">)</span>; <span class="va">reg_names</span> <span class="co"># Region names</span></span>
<span><span class="va">nreg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">reg_names</span><span class="op">)</span>; <span class="va">nreg</span> <span class="co"># Number of regions</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="mapping-with-ggplot">Mapping with ggplot<a class="anchor" aria-label="anchor" href="#mapping-with-ggplot"></a>
</h3>
<p>Further we will rely on <code>ggplot</code> package for figures and
maps, which requires the intput data in <code>data.frame</code> format,
here are the required conversions and the final map.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">gis</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">region</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># geom_polygon(aes(fill = id), colour = rgb(1, 1, 1, 0.5)) +</span></span>
<span>  <span class="co"># geom_polygon(aes(fill = id), colour = "white", size = 1) +</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># coord_quickmap() +</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set3"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"Region"</span>, title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Utopia,"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">gis</span><span class="op">)</span>, <span class="st">"regions"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, label <span class="op">=</span> <span class="va">region</span><span class="op">)</span>, inherit.aes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="utopia_files/figure-html/Utopia_map_ggplot-1.png" alt="The selected map for the Utopia model using ggplot."><div class="figcaption">The selected map for the Utopia model using
ggplot.</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="sub-annual-time-resolution">Sub-annual time resolution<a class="anchor" aria-label="anchor" href="#sub-annual-time-resolution"></a>
</h2>
<p>Here are examples of sub-annual time hierarchy (time-slices or
<code>slices</code>), from one to four levels. The number of levels and
their names are flexible (except the upper ‘ANNUAL’ level). The names of
the levels are important, they are used as key-words in the definition
of commodities and technologies.</p>
<div class="section level3">
<h3 id="annual-default">Annual (default)<a class="anchor" aria-label="anchor" href="#annual-default"></a>
</h3>
<p>For some models, sub-annual time granularity is not needed and can be
dropped. This also assumed by default, if slices are not specified, the
model will have the annual resolution. Though we can also define this
for demonstration of the time-level structures.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1 time slice - ANNUAL</span></span>
<span><span class="va">timeslices1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  ANNUAL <span class="op">=</span> <span class="st">"ANNUAL"</span> <span class="co"># This level should present in every time-slices structure</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="seasons-and-typical-hours">Seasons and typical hours<a class="anchor" aria-label="anchor" href="#seasons-and-typical-hours"></a>
</h3>
<p>We can add more levels - seasons or months, weeks, and hours. They
should be saved in nested lists. Here is an example with seasons
(Winter, Summer, spRing, Autumn), and hours (Day, Night, Peak). The
first element in each list is the share of this particular slice in the
level. The sum of shares on each level should be equal to one.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 4x3 = 24 slices</span></span>
<span><span class="va">timeslices2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  ANNUAL <span class="op">=</span> <span class="st">"ANNUAL"</span>, <span class="co"># required</span></span>
<span>  <span class="co"># SEASON = c(W = list(1/4,</span></span>
<span>  <span class="co"># For consistency with other structures, lets rename SEASON to MONTH</span></span>
<span>  MONTH <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    W <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="fl">4</span>, <span class="co"># share of the Winter season in the year</span></span>
<span>      HOUR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        D <span class="op">=</span> <span class="fl">9</span> <span class="op">/</span> <span class="fl">24</span>, <span class="co"># share of day-hours in Winter</span></span>
<span>        N <span class="op">=</span> <span class="fl">12</span> <span class="op">/</span> <span class="fl">24</span>, <span class="co"># share of night-hours in Winter</span></span>
<span>        P <span class="op">=</span> <span class="fl">3</span> <span class="op">/</span> <span class="fl">24</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>, <span class="co"># share of peak hours in Winter</span></span>
<span>    R <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="fl">4</span>, <span class="co"># share of the spRing season in the year</span></span>
<span>      HOUR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        D <span class="op">=</span> <span class="fl">11</span> <span class="op">/</span> <span class="fl">24</span>, <span class="co"># share of day-hours in spRing</span></span>
<span>        N <span class="op">=</span> <span class="fl">11</span> <span class="op">/</span> <span class="fl">24</span>, <span class="co"># share of night-hours in spRing</span></span>
<span>        P <span class="op">=</span> <span class="fl">2</span> <span class="op">/</span> <span class="fl">24</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>, <span class="co"># share of peak hours in spRing</span></span>
<span>    S <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="fl">4</span>, <span class="co"># share of the Summer season in the year</span></span>
<span>      HOUR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        D <span class="op">=</span> <span class="fl">12</span> <span class="op">/</span> <span class="fl">24</span>, <span class="co"># share of day-hours in Summer</span></span>
<span>        N <span class="op">=</span> <span class="fl">9</span> <span class="op">/</span> <span class="fl">24</span>, <span class="co"># share of night-hours in Summer</span></span>
<span>        P <span class="op">=</span> <span class="fl">3</span> <span class="op">/</span> <span class="fl">24</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>, <span class="co"># share of peak hours in Summer)</span></span>
<span>    A <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="fl">4</span>, <span class="co"># share of the Autumn season in the year</span></span>
<span>      HOUR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        D <span class="op">=</span> <span class="fl">11</span> <span class="op">/</span> <span class="fl">24</span>, <span class="co"># share of day-hours in Autumn</span></span>
<span>        N <span class="op">=</span> <span class="fl">11</span> <span class="op">/</span> <span class="fl">24</span>, <span class="co"># share of night-hours in Autumn</span></span>
<span>        P <span class="op">=</span> <span class="fl">2</span> <span class="op">/</span> <span class="fl">24</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="co"># share of peak hours in Autumn)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Four seasons and the three groups of hours will result in 12
sub-annual time-slices. If the spring and fall have similar parameters
and can be aggregated into one season, reducing the total number of
slices to 9. Though there might be reasons to separate them if, for
example, the final demand is significantly different in the seasons, or
some resources (like hydro-power) have a different profile in autumn and
spring.</p>
</div>
<div class="section level3">
<h3 id="months-and-representative-day-hours">Months and representative day hours<a class="anchor" aria-label="anchor" href="#months-and-representative-day-hours"></a>
</h3>
<p>It is probably more natural to operate with real months and real
hours, and easier from a data perspective. The following example has 12
months and 24 hours for each month, considering one representative day
per month. Therefore this will result in 288 time slices per every year
of the model. However, higher granularity comes with a computational
penalty. Though for our toy model with only a few technologies, this is
not a level of concern yet. If we disregard the differences in the
length of the months, then the definition of time slices will be even
easier - we won’t have to specify any shares, they will be assumed as
equal during the model compilation.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 24*1*12 = 288 time slices, two sub-annual levels</span></span>
<span><span class="va">timeslices3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  ANNUAL <span class="op">=</span> <span class="st">"ANNUAL"</span>, <span class="co"># this name is fixed, should not be changes</span></span>
<span>  MONTH <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"m"</span>, <span class="fu"><a href="https://rdrr.io/r/base/formatc.html" class="external-link">formatC</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, width <span class="op">=</span> <span class="fl">2</span>, flag <span class="op">=</span> <span class="st">"0"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  HOUR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"h"</span>, <span class="fu"><a href="https://rdrr.io/r/base/formatc.html" class="external-link">formatC</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">23</span>, width <span class="op">=</span> <span class="fl">2</span>, flag <span class="op">=</span> <span class="st">"0"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>We have defined 3 different options of sub-annual time steps. The
first option has only one level (“ANNUAL”), and two others also have
months (or seasons) and groups of typical hours. The following
definition of the model objects will rely on the chosen time structure.
For example, some commodities or technologies can have higher
granularity and will appear in the hour-level equations. Whereas others
may have annual or season/month-level time resolution, that means they
will appear only in their level balance equations. The names of slice
levels and slices should be consistent across the model objects.
Therefore the time-structure is fixed, model-specific. To make it a bit
more flexible for playing with alternative specifications, we can have
several time-structure with the same names of levels, like in lists
<code>timeslices2</code> and <code>timeslices3</code> above. They both
have “ANNUAL”, “MONTH”, and “HOUR” levels. Though the names of the
slice-elements will be different, and we will have to avoid using them
in the model specification.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># timeSlices(timeslices1) # Experimental -- not working yet</span></span>
<span><span class="fu"><a href="../reference/calendar.html">make_timetable</a></span><span class="op">(</span><span class="va">timeslices2</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/calendar.html">make_timetable</a></span><span class="op">(</span><span class="va">timeslices3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Choose time slices level</span></span>
<span><span class="va">timeslices</span> <span class="op">&lt;-</span> <span class="va">timeslices2</span></span>
<span><span class="co"># timeslices &lt;- timeslices3</span></span>
<span></span>
<span><span class="va">slc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calendar.html">make_timetable</a></span><span class="op">(</span><span class="va">timeslices</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">nslc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">slc</span><span class="op">$</span><span class="va">slice</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">nmon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">timeslices</span><span class="op">$</span><span class="va">MONTH</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">nhou</span> <span class="op">&lt;-</span> <span class="va">nslc</span> <span class="op">/</span> <span class="va">nmon</span><span class="op">)</span></span></code></pre></div>
<p>We will assign the time slices to the model-object later, but may
also need the structure and/or names of the slices in the definition of
other objects, such as technologies, demand, and supply, therefore
useful to have them ready.</p>
</div>
</div>
<div class="section level2">
<h2 id="electric-power-sector">Electric power sector<a class="anchor" aria-label="anchor" href="#electric-power-sector"></a>
</h2>
<p>Electric generation is likely the most often modeled sector of RES.
It has a number of alternative technological options which can be
evaluated and compared with RES-models. The minimum set for the model is
a declaration of commodities, technologies, supply, demand, and basic
system parameters, like time-slices, as discussed above.</p>
<div class="section level3">
<h3 id="commodities">Commodities<a class="anchor" aria-label="anchor" href="#commodities"></a>
</h3>
<p>A “commodity” notion in the model is a generalization of goods,
services, or emissions. Commodities link processes such as supply,
technologies, demands as input or output. The minimum requirements to
declare commodity is its name. Additional parameters can be stored in
the class <code>commodity</code> for information and processing, most of
the slots are currently reserved to be used in user-defined functions.
The preferred way to create the class and fill it with data is the
<code><a href="../reference/commodity.html">newCommodity()</a></code> function as shown below.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">COA</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"COA"</span>, <span class="co"># the name as it appears in the solver-software and the model sets</span></span>
<span>  desc <span class="op">=</span> <span class="st">"Generic coal"</span>, <span class="co"># just a comment</span></span>
<span>  emis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> <span class="co"># emissions, associated with fuels combustion (see the flags in technologies)</span></span>
<span>    comm <span class="op">=</span> <span class="st">"CO2"</span>, <span class="co"># this commodity (CO2) is emmited when the fuel (COA) is used</span></span>
<span>    unit <span class="op">=</span> <span class="st">"kt/PJ"</span>, <span class="co"># the unit of emissions for refference</span></span>
<span>    emis <span class="op">=</span> <span class="fl">100</span> <span class="co"># i.e. 100 kt of CO2 emmitted per one unit of energy (1 PJ)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span> <span class="co"># 'ANNUAL' means no sub-annual granularity for the commodity</span></span>
<span>  <span class="co"># color = "brown" # reserved for output figures, optional</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">OIL</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"OIL"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Oil and oil products"</span>,</span>
<span>  emis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"CO2"</span>,</span>
<span>    emis <span class="op">=</span> <span class="fl">80</span></span>
<span>  <span class="op">)</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">GAS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"GAS"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Natural gas"</span>,</span>
<span>  emis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"CO2"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"kt/PJ"</span>,</span>
<span>    emis <span class="op">=</span> <span class="fl">70</span></span>
<span>  <span class="op">)</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"MONTH"</span> <span class="co"># This commodity will appear in month-level equations</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">CH4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"CH4"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Methan emmisions"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"MONTH"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">BIO</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"BIO"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Generic biomass, all types"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># More energy commodities with less details</span></span>
<span><span class="va">ELC</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span><span class="st">"ELC"</span>, desc <span class="op">=</span> <span class="st">"Electricity"</span>, timeframe <span class="op">=</span> <span class="st">"HOUR"</span><span class="op">)</span></span>
<span><span class="va">HVE</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span><span class="st">"HVE"</span>, desc <span class="op">=</span> <span class="st">"High voltage electricity"</span>, timeframe <span class="op">=</span> <span class="st">"HOUR"</span><span class="op">)</span></span>
<span><span class="va">UHV</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span><span class="st">"UHV"</span>, desc <span class="op">=</span> <span class="st">"Ultra high voltage electricity"</span>, timeframe <span class="op">=</span> <span class="st">"HOUR"</span><span class="op">)</span></span>
<span><span class="va">NUC</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span><span class="st">"NUC"</span>, desc <span class="op">=</span> <span class="st">"Nuclear fuel"</span>, timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span><span class="op">)</span></span>
<span><span class="va">HYD</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span><span class="st">"HYD"</span>, desc <span class="op">=</span> <span class="st">"Hydro energy"</span>, timeframe <span class="op">=</span> <span class="st">"HOUR"</span><span class="op">)</span></span>
<span><span class="va">SOL</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span><span class="st">"SOL"</span>, desc <span class="op">=</span> <span class="st">"Solar energy"</span>, timeframe <span class="op">=</span> <span class="st">"HOUR"</span><span class="op">)</span></span>
<span><span class="va">WIN</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span><span class="st">"WIN"</span>, desc <span class="op">=</span> <span class="st">"Wind energy"</span>, timeframe <span class="op">=</span> <span class="st">"HOUR"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Emissions</span></span>
<span><span class="va">CO2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span><span class="st">"CO2"</span>, desc <span class="op">=</span> <span class="st">"Carbon dioxide emissions"</span>, timeframe <span class="op">=</span> <span class="st">"HOUR"</span><span class="op">)</span></span>
<span><span class="va">NOX</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span><span class="st">"NOX"</span>, desc <span class="op">=</span> <span class="st">"Nitrogen oxide emissions"</span>, timeframe <span class="op">=</span> <span class="st">"HOUR"</span><span class="op">)</span></span>
<span><span class="va">SO2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span><span class="st">"SO2"</span>, desc <span class="op">=</span> <span class="st">"Sulfur dioxide emissions"</span>, timeframe <span class="op">=</span> <span class="st">"MONTH"</span><span class="op">)</span></span>
<span><span class="va">HG</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span><span class="st">"HG"</span>, desc <span class="op">=</span> <span class="st">"Mercury emissions"</span>, timeframe <span class="op">=</span> <span class="st">"HOUR"</span><span class="op">)</span></span>
<span><span class="va">PM</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commodity.html">newCommodity</a></span><span class="op">(</span><span class="st">"PM"</span>, desc <span class="op">=</span> <span class="st">"Particulate matter emissions"</span>, timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="the-final-demand">The final demand<a class="anchor" aria-label="anchor" href="#the-final-demand"></a>
</h3>
<p>The final product in this model will be electricity (ELC), the final
demand for ELC is exogenous. Since we defined <em>ELC</em> as an
hour-level commodity, we specify demand for every time slice (the load
curve) and every region where it is consumed. The number of hours (or
groups of hours) is equal to the time-slices. In the case of the<br>
### Demand by months and hours hours Now let’s specify annual, monthly,
and hourly demand for electricity, assuming that every region has a
different level of ELC consumptions and the loadcurve. Instead of
googling and web-scrapping the Utopia’s load curve, we generate it
randomly for our example.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Annual demand in 2015</span></span>
<span><span class="va">elc_dem_a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  region <span class="op">=</span> <span class="va">reg_names</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2015</span>,</span>
<span>  GWh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">5000</span>, by <span class="op">=</span> <span class="fl">500</span>, length.out <span class="op">=</span> <span class="va">nreg</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">elc_dem_a</span></span>
<span></span>
<span><span class="va">fLoadCurve</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span> <span class="op">=</span> <span class="fl">24</span>, <span class="va">seed</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">delt</span> <span class="op">=</span> <span class="fl">24</span> <span class="op">/</span> <span class="va">n</span> <span class="op">/</span> <span class="fl">20</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># a function to generate an arbitrary load curve</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span></span>
<span>  <span class="va">iter</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span>  <span class="va">lc</span> <span class="op">&lt;-</span> <span class="fl">1.</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># ARMA</span></span>
<span>    <span class="va">lc</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">*</span> <span class="va">lc</span><span class="op">[</span><span class="va">i</span> <span class="op">-</span> <span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="op">-</span><span class="fl">.1</span> <span class="op">*</span> <span class="op">(</span><span class="va">lc</span><span class="op">[</span><span class="va">i</span> <span class="op">-</span> <span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="va">delt</span>, <span class="va">delt</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="op">(</span><span class="fl">0</span> <span class="op">+</span> <span class="va">lc</span><span class="op">)</span> <span class="op">*</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">lc</span> <span class="op">+</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Hourly demand for every region</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">dem</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">reg_names</span>, each <span class="op">=</span> <span class="va">nslc</span><span class="op">)</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2015</span>,</span>
<span>  slice <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">slc</span><span class="op">$</span><span class="va">slice</span>, <span class="va">nreg</span><span class="op">)</span>,</span>
<span>  GWh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">elc_dem_a</span><span class="op">$</span><span class="va">GWh</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="op">(</span><span class="va">x</span> <span class="op">*</span> <span class="fu">fLoadCurve</span><span class="op">(</span><span class="va">nmon</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/kronecker.html" class="external-link">%x%</a></span> <span class="fu">fLoadCurve</span><span class="op">(</span><span class="va">nhou</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="va">nslc</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dem</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">dem</span><span class="op">$</span><span class="va">GWh</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check by aggregating back to annual numbers</span></span>
<span><span class="va">dem</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">region</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>GWh_agg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">GWh</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>GWh_a <span class="op">=</span> <span class="va">elc_dem_a</span><span class="op">$</span><span class="va">GWh</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add month and hour for plots</span></span>
<span><span class="co"># dem$month &lt;- month.abb[as.numeric(substr(dem$slice, 2, 3))]</span></span>
<span><span class="co"># dem$hour &lt;- as.integer(substr(dem$slice, 6, 7))</span></span>
<span><span class="va">dem</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">dem</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">slc</span>, <span class="va">MONTH</span>, <span class="va">HOUR</span>, <span class="va">slice</span>, <span class="va">share</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"slice"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>month <span class="op">=</span> <span class="va">MONTH</span><span class="op">)</span></span>
<span><span class="va">dem</span><span class="op">$</span><span class="va">hour</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">dem</span><span class="op">$</span><span class="va">HOUR</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">dem</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">hour</span>, <span class="va">GWh</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">region</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">month</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"(Assumed) Electricity consumption by hours in the base year"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="utopia_files/figure-html/demand_MH_baseYear-1.png"><!-- --></p>
<p>The demand for 2015 is done, now we need to provide projections of
the demand up to the last year of the model horizon, and with the same
level of granularity (regions * slices) as the base year, and the
commodity (ELC) itself. We can specify the demand for every (milestone)
year of the model horizon, or some of them. The values between specified
years will be interpolated If the model horizon goes beyond the last
year, the final values will be used for interpolation forward.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Adding annual demand for 2030 and 2055</span></span>
<span><span class="va">elc_dem_2030</span> <span class="op">&lt;-</span> <span class="va">dem</span></span>
<span><span class="va">elc_dem_2030</span><span class="op">$</span><span class="va">year</span> <span class="op">&lt;-</span> <span class="fl">2030</span></span>
<span><span class="va">elc_dem_2030</span><span class="op">$</span><span class="va">GWh</span> <span class="op">&lt;-</span> <span class="va">dem</span><span class="op">$</span><span class="va">GWh</span> <span class="op">*</span> <span class="fl">2</span> <span class="co"># assuming two-fold growth by 2030</span></span>
<span></span>
<span><span class="va">elc_dem_2055</span> <span class="op">&lt;-</span> <span class="va">dem</span></span>
<span><span class="va">elc_dem_2055</span><span class="op">$</span><span class="va">year</span> <span class="op">&lt;-</span> <span class="fl">2055</span> <span class="co"># The model horizon</span></span>
<span><span class="va">elc_dem_2055</span><span class="op">$</span><span class="va">GWh</span> <span class="op">&lt;-</span> <span class="va">dem</span><span class="op">$</span><span class="va">GWh</span> <span class="op">*</span> <span class="fl">3</span> <span class="co"># and 3-times by 2055</span></span>
<span></span>
<span><span class="va">elc_dem</span> <span class="op">&lt;-</span> <span class="va">dem</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">elc_dem_2030</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">elc_dem_2055</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The model units in PJ, converting...</span></span>
<span><span class="va">elc_dem</span><span class="op">$</span><span class="va">PJ</span> <span class="op">&lt;-</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"GWh"</span>, <span class="st">"PJ"</span>, <span class="va">elc_dem</span><span class="op">$</span><span class="va">GWh</span><span class="op">)</span></span>
<span><span class="va">elc_dem</span><span class="op">$</span><span class="va">region</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">elc_dem</span><span class="op">$</span><span class="va">region</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># a &lt;- (load("~/R/energyRt/solwork/UTOPIA_BASE_Julia/data.RData"))</span></span>
<span><span class="co"># dat$pDemand |&gt; as.data.table()</span></span>
<span><span class="co"># scen_BASE_int@modInp@parameters$pDemand@data</span></span>
<span><span class="co"># scen_BASE_int@modInp@parameters$pDemand@data &lt;- dat$pDemand |&gt;</span></span>
<span>  <span class="co"># as.data.table()</span></span>
<span></span>
<span><span class="co"># replace data for banchmarking</span></span>
<span><span class="co"># elc_dem &lt;- elc_dem |&gt; </span></span>
<span><span class="co">#   left_join(select(dat$pDemand, region, year, slice, value)) |&gt;</span></span>
<span><span class="co">#   mutate(PJ = value) |&gt; select(-value)</span></span>
<span></span>
<span><span class="va">DEM_ELC</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/demand.html">newDemand</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"DEM_ELC"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Final demand for electricity"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>  dem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="va">elc_dem</span><span class="op">$</span><span class="va">year</span>,</span>
<span>    region <span class="op">=</span> <span class="va">elc_dem</span><span class="op">$</span><span class="va">region</span>,</span>
<span>    slice <span class="op">=</span> <span class="va">elc_dem</span><span class="op">$</span><span class="va">slice</span>,</span>
<span>    dem <span class="op">=</span> <span class="va">elc_dem</span><span class="op">$</span><span class="va">PJ</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">DEM_ELC</span><span class="op">@</span><span class="va">dem</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">DEM_ELC</span><span class="op">@</span><span class="va">dem</span><span class="op">$</span><span class="va">year</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">DEM_ELC</span><span class="op">@</span><span class="va">dem</span><span class="op">$</span><span class="va">region</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">DEM_ELC</span><span class="op">@</span><span class="va">dem</span><span class="op">$</span><span class="va">slice</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="primary-supply">Primary supply<a class="anchor" aria-label="anchor" href="#primary-supply"></a>
</h3>
<p>Primary commodities, such as primary energy sources, materials,
appear in the RES-model either by export from the rest of the world, or
supply. Neither, supply or export from ROW has capacity per se. The main
difference between them is the origin of the commodity if it is domestic
or foreign Here we assume that different regions of Utopia have
different resources to stimulate trade between them. Function
<code>newSupply</code> creates <code>supply</code> object with declared
parameters. The annual, regional, or slice-level limits, as well as
costs, can be assigned with <code>availability</code> parameters.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># If we assume that coal is abundunt resource, available in every region with the same price,</span></span>
<span><span class="co"># we don't have to declare @region of the supply.</span></span>
<span><span class="va">SUP_COA</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sypply.html">newSupply</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"SUP_COA"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Supply of coal"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"COA"</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"PJ"</span>,</span>
<span>  reserve <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>res.up <span class="op">=</span> <span class="fl">1e6</span><span class="op">)</span>, <span class="co"># total limit of the resource (i.e. deposits)</span></span>
<span>  region <span class="op">=</span> <span class="va">reg_names</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  availability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="fl">2030</span>, <span class="fl">2050</span><span class="op">)</span>,</span>
<span>    ava.up <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">2000</span>, <span class="fl">1000</span><span class="op">)</span>, <span class="co"># the upper bound on availability of the commodity</span></span>
<span>    cost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">convert</span><span class="op">(</span><span class="st">"USD/tce"</span>, <span class="st">"MUSD/PJ"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">60</span>, <span class="fl">70</span><span class="op">)</span> <span class="op">*</span> <span class="fl">.7</span><span class="op">)</span><span class="op">)</span> <span class="co"># assumed price per 1PJ</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="co"># timeframe = "ANNUAL"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The saved parameter can be checked in
<code>SUP_COA@availability</code> slot:</p>
<table class="table">
<thead><tr class="header">
<th align="left">region</th>
<th align="right">year</th>
<th align="left">slice</th>
<th align="right">ava.lo</th>
<th align="right">ava.up</th>
<th align="right">ava.fx</th>
<th align="right">cost</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">NA</td>
<td align="right">2015</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">1000</td>
<td align="right">NA</td>
<td align="right">1.194213</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="right">2030</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">2000</td>
<td align="right">NA</td>
<td align="right">1.433056</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">2050</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">1000</td>
<td align="right">NA</td>
<td align="right">1.671898</td>
</tr>
</tbody>
</table>
<p>The <code>NA</code> values mean “for all” by default in columns with
sets (<code>region</code>, <code>year</code>, <code>slice</code>) or “no
constraint” in columns with numeric parameters. The values between the
specified years will be linearly interpolated by default.<br>
Similarly, for other primary commodities:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="va">SUP_GAS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sypply.html">newSupply</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"SUP_GAS"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Supply of natural gas"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"GAS"</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"PJ"</span>,</span>
<span>  reserve <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>res.up <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1e3</span>, <span class="fl">1e6</span><span class="op">)</span><span class="op">)</span>, <span class="co">#</span></span>
<span>  region <span class="op">=</span> <span class="va">reg_names</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fl">2</span>, <span class="va">nreg</span><span class="op">)</span><span class="op">]</span>, <span class="co"># only those regions will have the supply</span></span>
<span>  availability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="fl">2030</span>, <span class="fl">2050</span><span class="op">)</span>,</span>
<span>    ava.up <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">2000</span>, <span class="fl">1000</span><span class="op">)</span>,</span>
<span>    cost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">convert</span><span class="op">(</span><span class="st">"USD/tce"</span>, <span class="st">"MUSD/PJ"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">70</span>, <span class="fl">80</span><span class="op">)</span> <span class="op">*</span> <span class="fl">.7</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="co"># timeframe = "ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">SUP_NUC</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sypply.html">newSupply</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"SUP_NUC"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"NUC"</span>,</span>
<span>  availability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    cost <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"USD/MWh"</span>, <span class="st">"MUSD/PJ"</span>, <span class="fl">4</span><span class="op">)</span> <span class="co"># assumed</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="co"># timeframe = "ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">RES_HYD</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sypply.html">newSupply</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"RES_HYD"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"HYD"</span>,</span>
<span>  availability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    ava.up <span class="op">=</span> <span class="fl">1e3</span>,</span>
<span>    cost <span class="op">=</span> <span class="fl">0</span> <span class="co"># no price to the resource, can be dropped</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">RES_SOL</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sypply.html">newSupply</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"RES_SOL"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"SOL"</span></span>
<span>  <span class="co"># availability will be defined by weather factors (see below)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">RES_WIN</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sypply.html">newSupply</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"RES_WIN"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"WIN"</span></span>
<span>  <span class="co"># availability will be defined by weather factors (see below)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="technologies">Technologies<a class="anchor" aria-label="anchor" href="#technologies"></a>
</h3>
<p>Technologies (techs) are the key part of the RES-modeling. This topic
is broad and deserves a separate tutorial (in progress). By now, the
main ideas to keep in mind:<br>
– techs take some commodities as input and generate other as
output;<br>
– there are several levels of transformation of input into output, with
two main intermediate steps: <code>use</code> and
<code>activity</code>;<br>
– <code>use</code> can be seen as an aggregation of all inputs with
various weights into one level, then all the comm…</p>
<div class="section level4">
<h4 id="coal-power-plant">Coal power plant<a class="anchor" aria-label="anchor" href="#coal-power-plant"></a>
</h4>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Coal-fired power plants ####</span></span>
<span><span class="va">ECOA</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/technology.html">newTechnology</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"ECOA"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Generic Coal Power Plant"</span>,</span>
<span>  input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"COA"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"PJ"</span>,</span>
<span>    combustion <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"PJ"</span></span>
<span>  <span class="op">)</span>, </span>
<span>  aux <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    acomm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HG"</span>, <span class="st">"NOX"</span>, <span class="st">"PM"</span>, <span class="st">"SO2"</span><span class="op">)</span>,</span>
<span>    unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"t"</span>, <span class="st">"kt"</span>, <span class="st">"kt"</span>, <span class="st">"kt"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  cap2act <span class="op">=</span> <span class="fl">31.536</span>,</span>
<span>  ceff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># region = "R1",</span></span>
<span>    <span class="co"># year = c(2015),</span></span>
<span>    comm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"COA"</span><span class="op">)</span>,</span>
<span>    cinp2use <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.4</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  aeff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    acomm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HG"</span>, <span class="st">"NOX"</span>, <span class="st">"SO2"</span>, <span class="st">"PM"</span><span class="op">)</span>,</span>
<span>    act2aout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">1.0</span>, <span class="fl">2.0</span>, <span class="fl">.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  afs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    slice <span class="op">=</span> <span class="st">"ANNUAL"</span>,</span>
<span>    afs.up <span class="op">=</span> <span class="fl">.6</span></span>
<span>  <span class="op">)</span>,</span>
<span>  fixom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    fixom <span class="op">=</span> <span class="fl">100</span></span>
<span>  <span class="op">)</span>,</span>
<span>  invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    invcost <span class="op">=</span> <span class="fl">1500</span></span>
<span>  <span class="op">)</span>,</span>
<span>  capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">reg_names</span>, <span class="va">reg_names</span><span class="op">)</span>,</span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="va">nreg</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2045</span>, <span class="va">nreg</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    stock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">nreg</span>, <span class="fl">0</span>, <span class="fl">10</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nreg</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    start <span class="op">=</span> <span class="fl">2010</span></span>
<span>  <span class="op">)</span>,</span>
<span>  olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    olife <span class="op">=</span> <span class="fl">30</span></span>
<span>  <span class="op">)</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">draw</span><span class="op">(</span><span class="va">ECOA</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="utopia_files/figure-html/techs_ECOA-1.png" alt="Coal-fired power plant."><div class="figcaption">Coal-fired power plant.</div>
</div>
</div>
<div class="section level4">
<h4 id="gas-power-plant">Gas power plant<a class="anchor" aria-label="anchor" href="#gas-power-plant"></a>
</h4>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Gas-fired power plant ####</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1e3</span><span class="op">)</span></span>
<span><span class="va">EGAS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/technology.html">newTechnology</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"EGAS"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Generic gas Power Plant"</span>,</span>
<span>  input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"GAS"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"PJ"</span>,</span>
<span>    combustion <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"PJ"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  aux <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    acomm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NOX"</span>, <span class="st">"CH4"</span><span class="op">)</span>,</span>
<span>    unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"kt"</span>, <span class="st">"kt"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  cap2act <span class="op">=</span> <span class="fl">31.536</span>,</span>
<span>  ceff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># region = "R1",</span></span>
<span>    <span class="co"># year = c(2015),</span></span>
<span>    comm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GAS"</span><span class="op">)</span>,</span>
<span>    cinp2use <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  aeff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    acomm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NOX"</span>, <span class="st">"CH4"</span><span class="op">)</span>,</span>
<span>    act2aout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">.1</span><span class="op">)</span> <span class="co"># arbitrary</span></span>
<span>  <span class="op">)</span>,</span>
<span>  afs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    slice <span class="op">=</span> <span class="st">"ANNUAL"</span>,</span>
<span>    afs.up <span class="op">=</span> <span class="fl">.8</span></span>
<span>  <span class="op">)</span>,</span>
<span>  fixom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    fixom <span class="op">=</span> <span class="fl">100</span></span>
<span>  <span class="op">)</span>,</span>
<span>  invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    invcost <span class="op">=</span> <span class="fl">1200</span></span>
<span>  <span class="op">)</span>,</span>
<span>  capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">reg_names</span>, <span class="va">reg_names</span><span class="op">)</span>,</span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="va">nreg</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2040</span>, <span class="va">nreg</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    stock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">nreg</span>, <span class="fl">.2</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nreg</span><span class="op">)</span><span class="op">)</span> <span class="co"># phasing out</span></span>
<span>  <span class="op">)</span>,</span>
<span>  start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    start <span class="op">=</span> <span class="fl">2010</span></span>
<span>  <span class="op">)</span>,</span>
<span>  olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    olife <span class="op">=</span> <span class="fl">30</span></span>
<span>  <span class="op">)</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">draw</span><span class="op">(</span><span class="va">EGAS</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="utopia_files/figure-html/techs_EGAS-1.png" alt="Gas-fired power plant."><div class="figcaption">Gas-fired power plant.</div>
</div>
</div>
<div class="section level4">
<h4 id="biomass-to-power-plant">Biomass-to-power plant<a class="anchor" aria-label="anchor" href="#biomass-to-power-plant"></a>
</h4>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Biomass co-fired power plants ####</span></span>
<span><span class="va">EBIO</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/technology.html">newTechnology</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"EBIO"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Generic Biomass-fired power plant"</span>,</span>
<span>  region <span class="op">=</span> <span class="va">reg_names</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fl">7</span>, <span class="va">nreg</span><span class="op">)</span><span class="op">]</span>,</span>
<span>  input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"BIO"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"PJ"</span>,</span>
<span>    combustion <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"PJ"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  aux <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    acomm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NOX"</span>, <span class="st">"PM"</span>, <span class="st">"CH4"</span><span class="op">)</span>,</span>
<span>    unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"kt"</span>, <span class="st">"kt"</span>, <span class="st">"kt"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  cap2act <span class="op">=</span> <span class="fl">31.536</span>,</span>
<span>  ceff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BIO"</span><span class="op">)</span>,</span>
<span>    cinp2use <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.3</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  aeff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    acomm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NOX"</span>, <span class="st">"PM"</span>, <span class="st">"CH4"</span><span class="op">)</span>,</span>
<span>    act2aout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">1</span>, <span class="fl">.01</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  afs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># activity level bounds per sum of listed slices ('ANNUAL')</span></span>
<span>    slice <span class="op">=</span> <span class="st">"ANNUAL"</span>,</span>
<span>    afs.up <span class="op">=</span> <span class="fl">.5</span></span>
<span>  <span class="op">)</span>,</span>
<span>  fixom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    fixom <span class="op">=</span> <span class="fl">50</span></span>
<span>  <span class="op">)</span>,</span>
<span>  varom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    varom <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"USD/MWh"</span>, <span class="st">"MUSD/PJ"</span>, <span class="fl">.5</span><span class="op">)</span> <span class="co"># Assumption</span></span>
<span>  <span class="op">)</span>,</span>
<span>  invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># year = 2015,</span></span>
<span>    invcost <span class="op">=</span> <span class="fl">2000</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># # stock = data.frame(</span></span>
<span>  <span class="co">#   region = ,</span></span>
<span>  <span class="co">#   year = ,</span></span>
<span>  <span class="co">#   stock = )</span></span>
<span>  <span class="co"># ),</span></span>
<span>  start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    start <span class="op">=</span> <span class="fl">2010</span></span>
<span>  <span class="op">)</span>,</span>
<span>  olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    olife <span class="op">=</span> <span class="fl">30</span></span>
<span>  <span class="op">)</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">draw</span><span class="op">(</span><span class="va">EBIO</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="utopia_files/figure-html/techs_EBIO-1.png" alt="Biomass-to-power technology."><div class="figcaption">Biomass-to-power technology.</div>
</div>
</div>
<div class="section level4">
<h4 id="nuclear-power">Nuclear power<a class="anchor" aria-label="anchor" href="#nuclear-power"></a>
</h4>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Nuclear power plant #</span></span>
<span><span class="va">ENUC</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/technology.html">newTechnology</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"ENUC"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Nuclear power plants"</span>,</span>
<span>  region <span class="op">=</span> <span class="va">reg_names</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"NUC"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"PJ"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"PJ"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  cap2act <span class="op">=</span> <span class="fl">31.536</span>,</span>
<span>  ceff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NUC"</span><span class="op">)</span>,</span>
<span>    cinp2use <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.35</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  af <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    af.lo <span class="op">=</span> <span class="fl">.8</span></span>
<span>  <span class="op">)</span>,</span>
<span>  fixom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    fixom <span class="op">=</span> <span class="fl">30</span></span>
<span>  <span class="op">)</span>,</span>
<span>  invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    invcost <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"USD/kW"</span>, <span class="st">"MUSD/GW"</span>, <span class="fl">3500</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="va">reg_names</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="fl">2060</span><span class="op">)</span>,</span>
<span>    stock <span class="op">=</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span>,</span>
<span>  start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    start <span class="op">=</span> <span class="fl">2010</span></span>
<span>  <span class="op">)</span>,</span>
<span>  end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    end <span class="op">=</span> <span class="fl">2030</span></span>
<span>  <span class="op">)</span>,</span>
<span>  olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    olife <span class="op">=</span> <span class="fl">60</span></span>
<span>  <span class="op">)</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">draw</span><span class="op">(</span><span class="va">ENUC</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="utopia_files/figure-html/techs_Nuclear-1.png" alt="Nuclear power technology."><div class="figcaption">Nuclear power technology.</div>
</div>
</div>
<div class="section level4">
<h4 id="hydro-power">Hydro power<a class="anchor" aria-label="anchor" href="#hydro-power"></a>
</h4>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EHYD</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/technology.html">newTechnology</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"EHYD"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Hydro power plants"</span>,</span>
<span>  input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"HYD"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"PJ"</span>,</span>
<span>    combustion <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span>,</span>
<span>  region <span class="op">=</span> <span class="va">reg_names</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fl">3</span>, <span class="va">nreg</span><span class="op">)</span><span class="op">]</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"PJ"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  cap2act <span class="op">=</span> <span class="fl">31.536</span>,</span>
<span>  ceff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HYD"</span><span class="op">)</span>,</span>
<span>    cinp2use <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  af <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    af.lo <span class="op">=</span> <span class="fl">0.15</span></span>
<span>  <span class="op">)</span>,</span>
<span>  afs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    slice <span class="op">=</span> <span class="st">"ANNUAL"</span>,</span>
<span>    afs.up <span class="op">=</span> <span class="fl">.4</span>,</span>
<span>    afs.lo <span class="op">=</span> <span class="fl">.3</span></span>
<span>  <span class="op">)</span>,</span>
<span>  fixom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    fixom <span class="op">=</span> <span class="fl">61.4</span></span>
<span>  <span class="op">)</span>,</span>
<span>  invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    invcost <span class="op">=</span> <span class="fl">5000</span></span>
<span>  <span class="op">)</span>,</span>
<span>  capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="va">reg_names</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fl">3</span>, <span class="va">nreg</span><span class="op">)</span><span class="op">]</span>,</span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="fl">2060</span><span class="op">)</span>,</span>
<span>    stock <span class="op">=</span> <span class="fl">5</span></span>
<span>  <span class="op">)</span>,</span>
<span>  start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    start <span class="op">=</span> <span class="fl">2060</span></span>
<span>  <span class="op">)</span>,</span>
<span>  olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    olife <span class="op">=</span> <span class="fl">80</span></span>
<span>  <span class="op">)</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">draw</span><span class="op">(</span><span class="va">EHYD</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="utopia_files/figure-html/techs_Hydro-1.png" alt="Hydro power technology."><div class="figcaption">Hydro power technology.</div>
</div>
</div>
<div class="section level4">
<h4 id="weather-factors">Weather factors<a class="anchor" aria-label="anchor" href="#weather-factors"></a>
</h4>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The weather information can be obtained from Utopia'a weather agency.</span></span>
<span><span class="co"># Here we just randomly generate solar and wind availability factors (AF).</span></span>
<span><span class="co"># For wind we can target, say, 25% annual AF, which can be achieved with</span></span>
<span><span class="co"># around 35% of the time when the wind is available, and the mean speed of wind</span></span>
<span><span class="co"># tending to 80% of maximum output capacity of wind plants.</span></span>
<span><span class="co"># For simplicity, let's disregard seasonal components, spatial</span></span>
<span><span class="co"># and temporal autocorrelation.</span></span>
<span><span class="co">#</span></span>
<span></span>
<span><span class="co"># Wind availability function</span></span>
<span><span class="va">rwind</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span>, <span class="va">sh1</span> <span class="op">=</span> <span class="fl">5</span>, <span class="va">sh2</span> <span class="op">=</span> <span class="fl">2</span>, <span class="va">pwind</span> <span class="op">=</span> <span class="fl">.35</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># pwind - probability of wind</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">sh1</span>, <span class="va">sh2</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">1</span>, <span class="va">n</span>, <span class="cn">TRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">pwind</span>, <span class="va">pwind</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co"># Check</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu">rwind</span><span class="op">(</span><span class="fl">1e5</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># We can use similar approach for clouds, assuming that expected value for</span></span>
<span><span class="co"># sky transparency is 70%, applying it to solar radiation profile by hours.</span></span>
<span><span class="va">rclouds</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span>, <span class="va">sh1</span> <span class="op">=</span> <span class="fl">3.5</span>, <span class="va">sh2</span> <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">sh1</span>, <span class="va">sh2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu">rclouds</span><span class="op">(</span><span class="fl">1e5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="fu">rclouds</span><span class="op">(</span><span class="fl">1e5</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"lightblue"</span>, probability <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p><img src="utopia_files/figure-html/weather-1.png"><!-- --></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Solar radiation as function of time slice</span></span>
<span><span class="va">solrad</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">slice</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">is.character</a></span><span class="op">(</span><span class="va">slice</span><span class="op">)</span><span class="op">)</span> <span class="va">slice</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">slice</span><span class="op">)</span></span>
<span>  <span class="va">idx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">slice</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="co"># assuming no difference between months/seasons for sunlight</span></span>
<span>  <span class="va">if_h</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"_h"</span>, <span class="va">slice</span><span class="op">)</span></span>
<span>  <span class="va">if_D</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"_D$"</span>, <span class="va">slice</span><span class="op">)</span></span>
<span>  <span class="co"># browser()</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">if_h</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># propose function of solar radiation by hours</span></span>
<span>    <span class="va">fsun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">h</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">rad</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">cos</a></span><span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span> <span class="op">*</span> <span class="op">(</span><span class="va">h</span><span class="op">)</span> <span class="op">/</span> <span class="fl">23</span><span class="op">)</span></span>
<span>      <span class="va">rad</span><span class="op">[</span><span class="va">rad</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>      <span class="va">rad</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="co"># extract hours as numbers from slices of type "m**_h**"</span></span>
<span>    <span class="va">h</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">slice</span><span class="op">[</span><span class="va">if_h</span><span class="op">]</span>, <span class="fl">6</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">idx</span><span class="op">[</span><span class="va">if_h</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">fsun</span><span class="op">(</span><span class="va">h</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">if_D</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">idx</span><span class="op">[</span><span class="va">if_D</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>    <span class="co"># assign some sun for Peak hours</span></span>
<span>    <span class="va">if_P</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"_P$"</span>, <span class="va">slice</span><span class="op">)</span></span>
<span>    <span class="va">idx</span><span class="op">[</span><span class="va">if_P</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">.5</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"unknown slices: "</span>, <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">slice</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">idx</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="cn">F</span><span class="op">)</span> <span class="op">{</span> <span class="co"># test</span></span>
<span>  <span class="va">rad</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">slc</span><span class="op">$</span><span class="va">slice</span>, <span class="fu">solrad</span><span class="op">(</span><span class="va">slc</span><span class="op">$</span><span class="va">slice</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rad</span><span class="op">[</span><span class="fl">2</span>, <span class="op">]</span>, type <span class="op">=</span> <span class="st">"l"</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1111</span><span class="op">)</span></span>
<span><span class="va">WWIN</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newWeather.html">newWeather</a></span><span class="op">(</span><span class="st">"WWIN"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Wind availability factor"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span>,</span>
<span>  weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">reg_names</span>, each <span class="op">=</span> <span class="va">nslc</span><span class="op">)</span>,</span>
<span>    year <span class="op">=</span> <span class="fl">2015</span>,</span>
<span>    slice <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">slc</span><span class="op">$</span><span class="va">slice</span>, <span class="va">nreg</span><span class="op">)</span>,</span>
<span>    wval <span class="op">=</span> <span class="fu">rwind</span><span class="op">(</span><span class="va">nreg</span> <span class="op">*</span> <span class="va">nslc</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">WSOL</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newWeather.html">newWeather</a></span><span class="op">(</span><span class="st">"WSOL"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Solar radiation index"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span>,</span>
<span>  weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">reg_names</span>, each <span class="op">=</span> <span class="va">nslc</span><span class="op">)</span>,</span>
<span>    year <span class="op">=</span> <span class="fl">2015</span>,</span>
<span>    slice <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">slc</span><span class="op">$</span><span class="va">slice</span>, <span class="va">nreg</span><span class="op">)</span>,</span>
<span>    wval <span class="op">=</span> <span class="fl">0</span> <span class="co"># assign later</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">WSOL</span><span class="op">@</span><span class="va">weather</span><span class="op">$</span><span class="va">wval</span> <span class="op">&lt;-</span> <span class="fu">rclouds</span><span class="op">(</span><span class="va">nreg</span> <span class="op">*</span> <span class="va">nslc</span><span class="op">)</span> <span class="op">*</span> <span class="fu">solrad</span><span class="op">(</span><span class="va">WSOL</span><span class="op">@</span><span class="va">weather</span><span class="op">$</span><span class="va">slice</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">WSOL</span><span class="op">@</span><span class="va">weather</span><span class="op">$</span><span class="va">wval</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">WSOL</span><span class="op">@</span><span class="va">weather</span><span class="op">$</span><span class="va">wval</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="cn">F</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">WSOL</span><span class="op">@</span><span class="va">weather</span><span class="op">$</span><span class="va">wval</span>, type <span class="op">=</span> <span class="st">"l"</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">WWIN</span><span class="op">@</span><span class="va">weather</span><span class="op">$</span><span class="va">wval</span>, type <span class="op">=</span> <span class="st">"l"</span>, col <span class="op">=</span> <span class="st">"red"</span>, xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">24</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="solar-arrays">Solar arrays<a class="anchor" aria-label="anchor" href="#solar-arrays"></a>
</h4>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ESOL</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/technology.html">newTechnology</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"ESOL"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Solar PV farm"</span>,</span>
<span>  input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"SOL"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"PJ"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"PJ"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  cap2act <span class="op">=</span> <span class="fl">31.536</span>,</span>
<span>  weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"WSOL"</span><span class="op">)</span>,</span>
<span>    waf.up <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="co"># * af.s * WSOL@weather$wval</span></span>
<span>  <span class="op">)</span>,</span>
<span>  fixom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    fixom <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span>,</span>
<span>  invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    invcost <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"USD/W"</span>, <span class="st">"MUSD/GW"</span>, <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">reg_names</span>, <span class="va">reg_names</span><span class="op">)</span>,</span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="va">nreg</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2035</span>, <span class="va">nreg</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    stock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">nreg</span>, <span class="fl">0</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nreg</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    start <span class="op">=</span> <span class="fl">2015</span></span>
<span>  <span class="op">)</span>,</span>
<span>  olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    olife <span class="op">=</span> <span class="fl">25</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">draw</span><span class="op">(</span><span class="va">ESOL</span><span class="op">)</span></span></code></pre></div>
<p><img src="utopia_files/figure-html/solar_PV-1.png"><!-- --></p>
</div>
<div class="section level4">
<h4 id="wind-farms">Wind farms<a class="anchor" aria-label="anchor" href="#wind-farms"></a>
</h4>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EWIN</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/technology.html">newTechnology</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"EWIN"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Wind power plants"</span>,</span>
<span>  input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"WIN"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"PJ"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"PJ"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  cap2act <span class="op">=</span> <span class="fl">31.536</span>,</span>
<span>  ceff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"WIN"</span><span class="op">)</span>,</span>
<span>    cinp2use <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    afc.up <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span>,</span>
<span>  weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    weather <span class="op">=</span> <span class="st">"WWIN"</span>,</span>
<span>    comm <span class="op">=</span> <span class="st">"WIN"</span>,</span>
<span>    waf.up <span class="op">=</span> <span class="fl">1</span> <span class="co">#</span></span>
<span>  <span class="op">)</span>,</span>
<span>  fixom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    fixom <span class="op">=</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span>,</span>
<span>  invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    invcost <span class="op">=</span> <span class="fl">1500</span></span>
<span>  <span class="op">)</span>,</span>
<span>  capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">reg_names</span>, <span class="va">reg_names</span><span class="op">)</span>,</span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="va">nreg</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2035</span>, <span class="va">nreg</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    stock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">nreg</span>, <span class="fl">0</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nreg</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    start <span class="op">=</span> <span class="fl">2015</span></span>
<span>  <span class="op">)</span>,</span>
<span>  olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    olife <span class="op">=</span> <span class="fl">25</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">draw</span><span class="op">(</span><span class="va">EWIN</span><span class="op">)</span></span></code></pre></div>
<p><img src="utopia_files/figure-html/wind_farm-1.png"><!-- --></p>
</div>
<div class="section level4">
<h4 id="energy-storage-systems">Energy storage systems<a class="anchor" aria-label="anchor" href="#energy-storage-systems"></a>
</h4>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">STGELC</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/storage.html">newStorage</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"STGELC"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Energy storage systems"</span>,</span>
<span>  cap2stg <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>olife <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>  invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    invcost <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"USD/kWh"</span>, <span class="st">"MUSD/PJ"</span>, <span class="fl">200</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  seff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    stgeff <span class="op">=</span> <span class="fl">.99</span>,</span>
<span>    inpeff <span class="op">=</span> <span class="fl">.9</span>,</span>
<span>    outeff <span class="op">=</span> <span class="fl">.95</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="interregional-trade">Interregional trade<a class="anchor" aria-label="anchor" href="#interregional-trade"></a>
</h3>
<p>The trade is basically a definition of trade routes between regions
for each commodity and each direction. There are many ways to arrange
the trade routes, which is growing with the number of regions. Here we
define trade between neihbor regions, which opens flows between all
uninsulated regions. The neighbor regions can be obtained based on the
GIS info.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># one of many ways to identify neighbor regions</span></span>
<span><span class="va">trd_nbr</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_binary_pred.html" class="external-link">st_intersects</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span><span class="va">gis</span>, <span class="fl">.01</span><span class="op">)</span>, <span class="va">gis</span>, sparse <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="va">trd_nbr</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lower.tri.html" class="external-link">lower.tri</a></span><span class="op">(</span><span class="va">trd_nbr</span>, diag <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dimnames.html" class="external-link">dimnames</a></span><span class="op">(</span><span class="va">trd_nbr</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">reg_names</span>, <span class="va">reg_names</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Trade routes matrix.</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="left">R1</th>
<th align="left">R2</th>
<th align="left">R3</th>
<th align="left">R4</th>
<th align="left">R5</th>
<th align="left">R6</th>
<th align="left">R7</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">R1</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="left">R2</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="left">R3</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">R4</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="left">R5</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="left">R6</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
</tr>
<tr class="odd">
<td align="left">R7</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
</tr>
</tbody>
</table>
<p>We can visualize the open trade routes over the map.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Data frame of trade routes</span></span>
<span><span class="va">trd_dt</span> <span class="op">&lt;-</span> <span class="va">trd_nbr</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">as.data.frame.table</a></span><span class="op">(</span>stringsAsFactors <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Freq</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>src <span class="op">=</span> <span class="fl">1</span>, dst <span class="op">=</span> <span class="fl">2</span>, trd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Map inter-region trade routes</span></span>
<span><span class="va">reg_centers</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="va">gis</span><span class="op">)</span></span>
<span><span class="va">trd_rou</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">trd_dt</span>, <span class="va">reg_centers</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"src"</span> <span class="op">=</span> <span class="st">"region"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">reg_centers</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dst"</span> <span class="op">=</span> <span class="st">"region"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>    xsrc <span class="op">=</span> <span class="va">x.x</span>, ysrc <span class="op">=</span> <span class="va">y.x</span>,</span>
<span>    xdst <span class="op">=</span> <span class="va">x.y</span>, ydst <span class="op">=</span> <span class="va">y.y</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># a &lt;- value</span></span>
<span><span class="va">trd_flows_map</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">gis</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"wheat"</span>, colour <span class="op">=</span> <span class="st">"white"</span>, alpha <span class="op">=</span> <span class="fl">1</span>, linewidth <span class="op">=</span> <span class="fl">.5</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> <span class="co"># aes fill = id,</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span> <span class="co"># do this to leave off the color legend</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Interregional electricity trade routes"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>    plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xsrc</span>, y <span class="op">=</span> <span class="va">ysrc</span>, xend <span class="op">=</span> <span class="va">xdst</span>, yend <span class="op">=</span> <span class="va">ydst</span><span class="op">)</span>,</span>
<span>    data <span class="op">=</span> <span class="va">trd_rou</span>, inherit.aes <span class="op">=</span> <span class="cn">FALSE</span>, linewidth <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">1</span>, colour <span class="op">=</span> <span class="st">"dodgerblue"</span>, lineend <span class="op">=</span> <span class="st">"round"</span>, show.legend <span class="op">=</span> <span class="cn">T</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">reg_centers</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xsrc</span>, y <span class="op">=</span> <span class="va">ysrc</span>, xend <span class="op">=</span> <span class="va">xdst</span>, yend <span class="op">=</span> <span class="va">ydst</span><span class="op">)</span>,</span>
<span>    data <span class="op">=</span> <span class="va">trd_rou</span>, inherit.aes <span class="op">=</span> <span class="cn">FALSE</span>, linewidth <span class="op">=</span> <span class="fl">.1</span>,</span>
<span>    arrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html" class="external-link">arrow</a></span><span class="op">(</span></span>
<span>      type <span class="op">=</span> <span class="st">"closed"</span>, angle <span class="op">=</span> <span class="fl">15</span>, ends <span class="op">=</span> <span class="st">"both"</span>, </span>
<span>      length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.15</span>, <span class="st">"inches"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    colour <span class="op">=</span> <span class="st">"white"</span>, alpha <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>    lineend <span class="op">=</span> <span class="st">"butt"</span>, linejoin <span class="op">=</span> <span class="st">"mitre"</span>, show.legend <span class="op">=</span> <span class="cn">T</span></span>
<span>  <span class="op">)</span> <span class="co"># , name = "Trade, PJ"</span></span>
<span><span class="va">trd_flows_map</span></span></code></pre></div>
<div class="float">
<img src="utopia_files/figure-html/trade_map-1.png" alt="Trade routes."><div class="figcaption">Trade routes.</div>
</div>
<p>For every trade-route, direction, and every traded commodity we have
to define an object of class <code>trade</code> to open the trades in
the model. To simplify the process, we can group the trades by source
regions. Therefore we will have up to 7 trade objects.</p>
<div class="section level4">
<h4 id="trade">Trade<a class="anchor" aria-label="anchor" href="#trade"></a>
</h4>
<p>For electric power sector model, we can potentially consider trades
as dispatch, adding various levels of voltages, or we may want to add an
option for primary commodities trade between regions. In this simplified
demonstration we define trade for electricity itself, without
consideration of different levels of voltages, as well as investments in
grid. It can be done adding into the model more technologies, such as
transformers, and the grid-lines. Though this type of models don’t have
such details as grid simulation models have. …</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define trade losses</span></span>
<span><span class="va">trd_dt</span><span class="op">$</span><span class="va">distance_km</span> <span class="op">&lt;-</span> <span class="fl">0.</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">trd_dt</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># stop()</span></span>
<span>  <span class="va">rg_dst</span> <span class="op">&lt;-</span> <span class="va">trd_dt</span><span class="op">$</span><span class="va">dst</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="va">rg_src</span> <span class="op">&lt;-</span> <span class="va">trd_dt</span><span class="op">$</span><span class="va">src</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="co"># lab_dst &lt;- reg_centers[rg_dst, 2:3]</span></span>
<span>  <span class="co"># lab_src &lt;- reg_centers[rg_src, 2:3]</span></span>
<span>  <span class="va">lab_dst</span> <span class="op">&lt;-</span> <span class="va">reg_centers</span><span class="op">[</span><span class="va">reg_centers</span><span class="op">$</span><span class="va">region</span> <span class="op">==</span> <span class="va">rg_dst</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="va">lab_src</span> <span class="op">&lt;-</span> <span class="va">reg_centers</span><span class="op">[</span><span class="va">reg_centers</span><span class="op">$</span><span class="va">region</span> <span class="op">==</span> <span class="va">rg_src</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="va">trd_dt</span><span class="op">$</span><span class="va">distance_km</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html" class="external-link">st_distance</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">lab_src</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">lab_dst</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="co"># no projection is given ("Utopia!") units are arbitrary</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Assume losses 5% per 1000 km</span></span>
<span><span class="va">trd_dt</span><span class="op">$</span><span class="va">losses</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">trd_dt</span><span class="op">$</span><span class="va">distance_km</span> <span class="op">/</span> <span class="fl">1e3</span> <span class="op">*</span> <span class="fl">0.05</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">trd_dt</span><span class="op">$</span><span class="va">teff</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">trd_dt</span><span class="op">$</span><span class="va">losses</span></span>
<span><span class="co"># Assuming 0.1 US cents per kWh per 1000 km for the transmission</span></span>
<span><span class="va">trd_dt</span><span class="op">$</span><span class="va">cost</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">trd_dt</span><span class="op">$</span><span class="va">distance_km</span> <span class="op">/</span> <span class="fl">1e3</span> <span class="op">*</span></span>
<span>  <span class="fu">convert</span><span class="op">(</span><span class="st">"USD/kWh"</span>, <span class="st">"MUSD/GWh"</span>, <span class="fl">.001</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">trd_dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">trd_dt</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># A repository for trades, related technologies and commodities</span></span>
<span><span class="va">TRBD_ELC</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newRepository.html">newRepository</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"TRBD_ELC"</span>, </span>
<span>  desc <span class="op">=</span> <span class="st">"Bidirectional tranmission lines"</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Define trade object for each route</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">trd_dt</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># stop()</span></span>
<span>  <span class="co"># The loop creates trade-objects for every region with neighbors,</span></span>
<span>  <span class="co"># ii &lt;- trd_dt$src %in% src_nm # select routes for the source region</span></span>
<span>  <span class="va">src_nm</span> <span class="op">&lt;-</span> <span class="va">trd_dt</span><span class="op">$</span><span class="va">src</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="va">dst_nm</span> <span class="op">&lt;-</span> <span class="va">trd_dt</span><span class="op">$</span><span class="va">dst</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> </span>
<span>  <span class="va">trd_nm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"TRBD_ELC"</span>, <span class="va">src_nm</span>, <span class="va">dst_nm</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="co"># Trade object name</span></span>
<span>  <span class="va">cmd_nm</span> <span class="op">&lt;-</span> <span class="st">"ELC"</span></span>
<span></span>
<span>  <span class="co"># Trade class for every route</span></span>
<span>  <span class="va">trd</span> <span class="op">&lt;-</span> <span class="fu">newTrade</span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="va">trd_nm</span>,</span>
<span>    desc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Bidirectional transmission line between"</span>, </span>
<span>                        <span class="va">src_nm</span>, <span class="st">"and"</span>, <span class="va">dst_nm</span><span class="op">)</span>,</span>
<span>    commodity <span class="op">=</span> <span class="va">cmd_nm</span>,</span>
<span>    source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">src_nm</span>, <span class="va">dst_nm</span><span class="op">)</span>,</span>
<span>    destination <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">dst_nm</span>, <span class="va">src_nm</span><span class="op">)</span>,</span>
<span>    trade <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      src <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">src_nm</span>, <span class="va">dst_nm</span><span class="op">)</span>,</span>
<span>      dst <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">dst_nm</span>, <span class="va">src_nm</span><span class="op">)</span>,</span>
<span>      ava.up <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"GWh"</span>, <span class="st">"PJ"</span>, <span class="fl">100</span><span class="op">)</span>, <span class="co"># Maximum capacity per route in GW</span></span>
<span>      teff <span class="op">=</span> <span class="va">trd_dt</span><span class="op">$</span><span class="va">teff</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="co"># trade losses</span></span>
<span>      <span class="co"># cost = trd_dt$cost[i] # trade costs</span></span>
<span>      <span class="co"># markup = trd_dt$cost[ii] # and/or markup</span></span>
<span>    <span class="op">)</span>,</span>
<span>    varom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      src <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">src_nm</span>, <span class="va">dst_nm</span><span class="op">)</span>,</span>
<span>      dst <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">dst_nm</span>, <span class="va">src_nm</span><span class="op">)</span>,</span>
<span>      varom <span class="op">=</span> <span class="va">trd_dt</span><span class="op">$</span><span class="va">cost</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="co"># variable trade costs</span></span>
<span>    <span class="op">)</span>,</span>
<span>    fixom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      <span class="co"># src = c(src_nm, dst_nm),</span></span>
<span>      <span class="co"># dst = c(dst_nm, src_nm),</span></span>
<span>      fixom <span class="op">=</span> <span class="fl">0.5</span> <span class="co"># fixed trade costs</span></span>
<span>    <span class="op">)</span>,</span>
<span>    capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      <span class="co"># src = c(src_nm, dst_nm),</span></span>
<span>      <span class="co"># dst = c(dst_nm, src_nm),</span></span>
<span>      stock <span class="op">=</span> <span class="fl">1</span> <span class="co"># initial capacity</span></span>
<span>    <span class="op">)</span>,</span>
<span>    capacityVariable <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># endogenous trade capacity &amp; investments</span></span>
<span>    invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">src_nm</span>, <span class="va">dst_nm</span><span class="op">)</span>,</span>
<span>      invcost <span class="op">=</span> <span class="va">trd_dt</span><span class="op">$</span><span class="va">distance_km</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">/</span> <span class="fl">1e3</span> <span class="op">*</span> <span class="fl">250</span> <span class="op">/</span> <span class="fl">2</span> <span class="co"># $250 MUSD/1000km</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">TRBD_ELC</span> <span class="op">&lt;-</span> <span class="fu">add</span><span class="op">(</span><span class="va">TRBD_ELC</span>, <span class="va">trd</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">TRBD_ELC</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="global-trade">Global trade<a class="anchor" aria-label="anchor" href="#global-trade"></a>
</h3>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">COAIMP</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newImport.html">newImport</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"COAIMP"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Coal import from ROW"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"COA"</span>,</span>
<span>  imp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># Let's make it a bit more expensive than domestic coal</span></span>
<span>    year <span class="op">=</span> <span class="va">SUP_COA</span><span class="op">@</span><span class="va">availability</span><span class="op">$</span><span class="va">year</span>,</span>
<span>    price <span class="op">=</span> <span class="va">SUP_COA</span><span class="op">@</span><span class="va">availability</span><span class="op">$</span><span class="va">cost</span> <span class="op">*</span> <span class="fl">1.2</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">GASIMP</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newImport.html">newImport</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"GASIMP"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Natural gas import from ROW"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"GAS"</span>,</span>
<span>  imp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># Let's make it a bit more expensive than domestic coal</span></span>
<span>    year <span class="op">=</span> <span class="va">SUP_GAS</span><span class="op">@</span><span class="va">availability</span><span class="op">$</span><span class="va">year</span>,</span>
<span>    price <span class="op">=</span> <span class="va">SUP_GAS</span><span class="op">@</span><span class="va">availability</span><span class="op">$</span><span class="va">cost</span> <span class="op">*</span> <span class="fl">1.2</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># OILIMP &lt;- newImport(</span></span>
<span><span class="co">#   name = "OILIMP",</span></span>
<span><span class="co">#   desc = "Oil import from ROW",</span></span>
<span><span class="co">#   commodity = "OIL",</span></span>
<span><span class="co">#   imp = list(</span></span>
<span><span class="co">#     # Let's make it a bit more expensive than domestic coal</span></span>
<span><span class="co">#     year = SUP_OIL@availability$year,</span></span>
<span><span class="co">#     price = SUP_OIL@availability$cost * 1.2</span></span>
<span><span class="co">#   )</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="the-model">The model<a class="anchor" aria-label="anchor" href="#the-model"></a>
</h3>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">repo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newRepository.html">newRepository</a></span><span class="op">(</span><span class="st">"utopia_repository"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">add</span><span class="op">(</span></span>
<span>    <span class="co"># Commodities</span></span>
<span>    <span class="va">ELC</span>, <span class="co"># electricity</span></span>
<span>    <span class="va">COA</span>, <span class="va">GAS</span>, <span class="va">NUC</span>, <span class="va">HYD</span>, <span class="va">BIO</span>, <span class="co"># energy</span></span>
<span>    <span class="va">WIN</span>, <span class="va">SOL</span>, <span class="co"># renewables</span></span>
<span>    <span class="va">CO2</span>, <span class="va">PM</span>, <span class="va">NOX</span>, <span class="va">SO2</span>, <span class="va">HG</span>, <span class="va">CH4</span>, <span class="co"># emissions</span></span>
<span>    <span class="co"># Supply</span></span>
<span>    <span class="va">SUP_NUC</span>, <span class="va">SUP_COA</span>, <span class="va">SUP_GAS</span>, <span class="va">RES_HYD</span>,</span>
<span>    <span class="va">RES_SOL</span>, <span class="va">RES_WIN</span>,</span>
<span>    <span class="co"># Import from ROW</span></span>
<span>    <span class="va">COAIMP</span>, <span class="va">GASIMP</span>,</span>
<span>    <span class="co"># Technologies</span></span>
<span>    <span class="va">ECOA</span>, <span class="va">EGAS</span>, <span class="va">ENUC</span>, <span class="va">EHYD</span>,</span>
<span>    <span class="co"># EWIN, ESOL,</span></span>
<span>    <span class="co"># Electricity trade</span></span>
<span>    <span class="va">TRBD_ELC</span>, <span class="co"># repository with electricity trade routes</span></span>
<span>    <span class="va">DEM_ELC</span> <span class="co"># ELC demand with load curve (24 hours x 12 months)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">repo</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">repo</span><span class="op">@</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">repo</span><span class="op">@</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mdl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newModel.html">newModel</a></span><span class="op">(</span><span class="st">"UTOPIA"</span>,</span>
<span>  debug <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span> <span class="co"># comm = "ELC",</span></span>
<span>    dummyImport <span class="op">=</span> <span class="fl">1e6</span>,</span>
<span>    dummyExport <span class="op">=</span> <span class="fl">1e6</span></span>
<span>  <span class="op">)</span>,</span>
<span>  region <span class="op">=</span> <span class="va">reg_names</span>,</span>
<span>  discount <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  calendar <span class="op">=</span> <span class="fu"><a href="../reference/calendar.html">newCalendar</a></span><span class="op">(</span><span class="fu"><a href="../reference/calendar.html">make_timetable</a></span><span class="op">(</span><span class="va">timeslices</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  repository <span class="op">=</span> <span class="va">repo</span></span>
<span><span class="op">)</span></span>
<span><span class="va">mdl</span><span class="op">@</span><span class="va">data</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">mdl</span><span class="op">@</span><span class="va">data</span></span></code></pre></div>
<p>We can check the shares of the time-slices which are auto-calculated
assuming that all slices have the same weights. This works for 24 hours,
but the weights for every month can be specified to take the difference
in months length.</p>
<table class="table">
<thead><tr class="header">
<th align="left">ANNUAL</th>
<th align="left">MONTH</th>
<th align="left">HOUR</th>
<th align="left">slice</th>
<th align="right">share</th>
<th align="right">weight</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ANNUAL</td>
<td align="left">A</td>
<td align="left">D</td>
<td align="left">A_D</td>
<td align="right">0.1145833</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">ANNUAL</td>
<td align="left">A</td>
<td align="left">N</td>
<td align="left">A_N</td>
<td align="right">0.1145833</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">ANNUAL</td>
<td align="left">A</td>
<td align="left">P</td>
<td align="left">A_P</td>
<td align="right">0.0208333</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">ANNUAL</td>
<td align="left">R</td>
<td align="left">D</td>
<td align="left">R_D</td>
<td align="right">0.1145833</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">ANNUAL</td>
<td align="left">R</td>
<td align="left">N</td>
<td align="left">R_N</td>
<td align="right">0.1145833</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">ANNUAL</td>
<td align="left">R</td>
<td align="left">P</td>
<td align="left">R_P</td>
<td align="right">0.0208333</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">ANNUAL</td>
<td align="left">S</td>
<td align="left">D</td>
<td align="left">S_D</td>
<td align="right">0.1250000</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">ANNUAL</td>
<td align="left">S</td>
<td align="left">N</td>
<td align="left">S_N</td>
<td align="right">0.0937500</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">ANNUAL</td>
<td align="left">S</td>
<td align="left">P</td>
<td align="left">S_P</td>
<td align="right">0.0312500</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">ANNUAL</td>
<td align="left">W</td>
<td align="left">D</td>
<td align="left">W_D</td>
<td align="right">0.0937500</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">ANNUAL</td>
<td align="left">W</td>
<td align="left">N</td>
<td align="left">W_N</td>
<td align="right">0.1250000</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">ANNUAL</td>
<td align="left">W</td>
<td align="left">P</td>
<td align="left">W_P</td>
<td align="right">0.0312500</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<div class="section level4">
<h4 id="the-model-horizon-and-annual-time-steps-milesone-years">The model horizon and annual time-steps
(<code>milesone years</code>)<a class="anchor" aria-label="anchor" href="#the-model-horizon-and-annual-time-steps-milesone-years"></a>
</h4>
<p>If we don’t need year-by-year steps, milestone years (MSY) can be
specifyed to reduce the model dimention. The function
<code>setMilestoneYears</code> takes as arguments the model start year
and the intervals between MSYs, and calculates the interval years (start
and end) for each milestone year.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mdl</span><span class="op">@</span><span class="va">config</span><span class="op">@</span><span class="va">horizon</span></span>
<span><span class="va">mdl</span> <span class="op">&lt;-</span> <span class="fu">setHorizon</span><span class="op">(</span><span class="va">mdl</span>, <span class="fl">2015</span><span class="op">:</span><span class="fl">2065</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">mdl</span><span class="op">@</span><span class="va">config</span><span class="op">@</span><span class="va">horizon</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="solver-settings">Solver settings<a class="anchor" aria-label="anchor" href="#solver-settings"></a>
</h3>
<p>The model / scenarios can be solved with one of the following
mathematical programming languages:<br>
* GAMS (General Algebraic Modeling System).<br>
* GLPK/MathProg (GNU Linear Programming Kit, MathProg is a subset of
AMPL).<br>
* Pyomo/Python.<br>
* JuMP/Julia<br>
The language/software (GAMS, GLPK, Python, Julia) must be preinstalled
with all required libraries. If it is visible from the system path, no
further settings are required. Otherwise, the path to the executable
must be specified as shown below.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># if GAMS is used:</span></span>
<span><span class="fu"><a href="../reference/gams.html">set_gams_path</a></span><span class="op">(</span><span class="st">"PATH"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/gams.html">set_gdxlib_path</a></span><span class="op">(</span><span class="st">"PATH"</span><span class="op">)</span></span>
<span><span class="co"># if GLPK is used:</span></span>
<span><span class="fu"><a href="../reference/set_glpk_path.html">set_glpk_path</a></span><span class="op">(</span><span class="st">"PATH"</span><span class="op">)</span></span>
<span><span class="co"># if Python is used:</span></span>
<span><span class="fu"><a href="../reference/set_python_path.html">set_python_path</a></span><span class="op">(</span><span class="st">"PATH"</span><span class="op">)</span></span>
<span><span class="co"># if Julia is used:</span></span>
<span><span class="fu"><a href="../reference/set_julia_path.html">set_julia_path</a></span><span class="op">(</span><span class="st">"PATH"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The default solver can be set as follows:</span></span>
<span><span class="fu">set_default_solver</span><span class="op">(</span><span class="va">solver_options</span><span class="op">$</span><span class="va">glpk</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># checks</span></span>
<span><span class="fu"><a href="../reference/gams.html">get_gams_path</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/gams.html">get_gdxlib_path</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">get_glpk_path</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">get_python_path</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">get_julia_path</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">get_default_solver</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/progress.html">set_progress_bar</a></span><span class="op">(</span><span class="st">"progress"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="scenarios">Scenarios<a class="anchor" aria-label="anchor" href="#scenarios"></a>
</h2>
<div class="section level3">
<h3 id="base-or-reference">“BASE” or “Reference”<a class="anchor" aria-label="anchor" href="#base-or-reference"></a>
</h3>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/progress.html">set_progress_bar</a></span><span class="op">(</span><span class="st">"progress"</span><span class="op">)</span></span>
<span><span class="va">scen_BASE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">mdl</span>, <span class="st">"BASE"</span>,</span>
<span>  solver <span class="op">=</span> <span class="va">solver_options</span><span class="op">$</span><span class="va">glpk</span>, <span class="co"># default is used if not specified</span></span>
<span>  tmp.del <span class="op">=</span> <span class="cn">FALSE</span> <span class="co"># to keep the solver directory after the run</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">scen_BASE</span><span class="op">)</span></span>
<span><span class="va">scen_BASE</span><span class="op">@</span><span class="va">misc</span><span class="op">$</span><span class="va">tmp.dir</span></span></code></pre></div>
<div class="section level4">
<h4 id="solve-with-different-optimization-software-solvers">Solve with different optimization software &amp; solvers<a class="anchor" aria-label="anchor" href="#solve-with-different-optimization-software-solvers"></a>
</h4>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compare models in different languages</span></span>
<span><span class="va">scen_BASE_glpk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">mdl</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"BASE_glpk"</span>,</span>
<span>  solver <span class="op">=</span> <span class="va">solver_options</span><span class="op">$</span><span class="va">glpk</span>,</span>
<span>  tmp.del <span class="op">=</span> <span class="cn">F</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">scen_BASE_glpk</span><span class="op">)</span></span>
<span></span>
<span><span class="va">scen_BASE_gams</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="fu">add</span><span class="op">(</span><span class="va">mdl</span><span class="op">)</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"BASE_gams"</span>,</span>
<span>  solver <span class="op">=</span> <span class="va">solver_options</span><span class="op">$</span><span class="va">gams_gdx_cplex</span>,</span>
<span>  tmp.del <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">scen_BASE_gams</span><span class="op">)</span></span>
<span></span>
<span><span class="va">scen_BASE_py</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="fu">add</span><span class="op">(</span><span class="va">mdl</span><span class="op">)</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"BASE_py"</span>,</span>
<span>  solver <span class="op">=</span> <span class="va">solver_options</span><span class="op">$</span><span class="va">pyomo_cbc</span>,</span>
<span>  tmp.del <span class="op">=</span> <span class="cn">F</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">scen_BASE_py</span><span class="op">)</span></span>
<span></span>
<span><span class="va">scen_BASE_jl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="fu">add</span><span class="op">(</span><span class="va">mdl</span><span class="op">)</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"BASE_jl"</span>,</span>
<span>  solver <span class="op">=</span> <span class="va">solver_options</span><span class="op">$</span><span class="va">julia_highs</span>,</span>
<span>  tmp.del <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">scen_BASE_jl</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/getData.html">getData</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="va">scen_BASE</span>,</span>
<span>    <span class="va">scen_BASE_glpk</span>,</span>
<span>    <span class="va">scen_BASE_jl</span>,</span>
<span>    <span class="va">scen_BASE_py</span>,</span>
<span>    <span class="va">scen_BASE_gams</span></span>
<span>    <span class="op">)</span>, </span>
<span>  name <span class="op">=</span> <span class="st">"vObjective"</span>, </span>
<span>  merge <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="alternative-routine-interpolate-write-solve-read">Alternative routine: interpolate, write, solve, read<a class="anchor" aria-label="anchor" href="#alternative-routine-interpolate-write-solve-read"></a>
</h4>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/progress.html">set_progress_bar</a></span><span class="op">(</span><span class="st">"bw"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Step 1: Interpolation of the model/scenario parameters</span></span>
<span><span class="va">scen_BASE_int</span> <span class="op">&lt;-</span> <span class="fu">interpolate</span><span class="op">(</span></span>
<span>  <span class="va">mdl</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"BASE"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Step 2: Write the model/scenario script on disk in the selected language</span></span>
<span><span class="va">scen_BASE_gams</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write.html">write_sc</a></span><span class="op">(</span></span>
<span>  <span class="va">scen_BASE_int</span>,</span>
<span>  solver <span class="op">=</span> <span class="va">solver_options</span><span class="op">$</span><span class="va">gams_gdx_cplex</span></span>
<span><span class="op">)</span></span>
<span><span class="va">scen_BASE_gams</span><span class="op">@</span><span class="va">misc</span><span class="op">$</span><span class="va">tmp.dir</span> <span class="co"># directory</span></span>
<span></span>
<span><span class="va">scen_BASE_py</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write.html">write_sc</a></span><span class="op">(</span><span class="va">scen_BASE_int</span>,</span>
<span>  solver <span class="op">=</span> <span class="va">solver_options</span><span class="op">$</span><span class="va">pyomo_</span></span>
<span><span class="op">)</span></span>
<span><span class="va">scen_BASE_py</span><span class="op">@</span><span class="va">misc</span><span class="op">$</span><span class="va">tmp.dir</span></span>
<span></span>
<span><span class="va">scen_BASE_glpk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write.html">write_sc</a></span><span class="op">(</span><span class="va">scen_BASE_int</span>,</span>
<span>  solver <span class="op">=</span> <span class="va">solver_options</span><span class="op">$</span><span class="va">glpk</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">scen_BASE_jl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write.html">write_sc</a></span><span class="op">(</span><span class="va">scen_BASE_int</span>,</span>
<span>  solver <span class="op">=</span> <span class="va">solver_options</span><span class="op">$</span><span class="va">julia_highs</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Step 3: Solve the model/scenario</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">scen_BASE_gams</span>, wait <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">scen_BASE_py</span>, wait <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">scen_BASE_glpk</span>, wait <span class="op">=</span> <span class="cn">FALSE</span>, intern <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">scen_BASE_jl</span>, wait <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Step 4: Read solution (wait until solved)</span></span>
<span><span class="va">scen_BASE_gams</span> <span class="op">&lt;-</span> <span class="fu">read</span><span class="op">(</span><span class="va">scen_BASE_gams</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">scen_BASE_gams</span><span class="op">)</span></span>
<span></span>
<span><span class="va">scen_BASE_py</span> <span class="op">&lt;-</span> <span class="fu">read</span><span class="op">(</span><span class="va">scen_BASE_py</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">scen_BASE_py</span><span class="op">)</span></span>
<span></span>
<span><span class="va">scen_BASE_glpk</span> <span class="op">&lt;-</span> <span class="fu">read</span><span class="op">(</span><span class="va">scen_BASE_glpk</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">scen_BASE_glpk</span><span class="op">)</span></span>
<span></span>
<span><span class="va">scen_BASE_jl</span> <span class="op">&lt;-</span> <span class="fu">read</span><span class="op">(</span><span class="va">scen_BASE_jl</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">scen_BASE_jl</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/getData.html">getData</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  GLPK <span class="op">=</span> <span class="va">scen_BASE_glpk</span>,</span>
<span>  Julia <span class="op">=</span> <span class="va">scen_BASE_jl</span>,</span>
<span>  Python <span class="op">=</span> <span class="va">scen_BASE_py</span>,</span>
<span>  GAMS <span class="op">=</span> <span class="va">scen_BASE_gams</span></span>
<span>  <span class="op">)</span>, </span>
<span>  name <span class="op">=</span> <span class="st">"vObjective"</span>, merge <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">scenario</th>
<th align="left">name</th>
<th align="right">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">GLPK</td>
<td align="left">vObjective</td>
<td align="right">125461.7</td>
</tr>
<tr class="even">
<td align="left">Julia</td>
<td align="left">vObjective</td>
<td align="right">125461.7</td>
</tr>
<tr class="odd">
<td align="left">Python</td>
<td align="left">vObjective</td>
<td align="right">125461.7</td>
</tr>
<tr class="even">
<td align="left">GAMS</td>
<td align="left">vObjective</td>
<td align="right">125461.7</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="co2-cap">CO2 cap<a class="anchor" aria-label="anchor" href="#co2-cap"></a>
</h3>
<p>Set CO2 cap for the country</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">emis_co2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getData.html">getData</a></span><span class="op">(</span><span class="va">scen_BASE</span>, <span class="st">"vBalance"</span>, comm <span class="op">=</span> <span class="st">"CO2"</span>, merge <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">scenario</span>, <span class="va">comm</span>, <span class="va">year</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">value</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></span>
<span><span class="va">emis_co2</span></span>
<span><span class="va">emis_co2_2030</span> <span class="op">&lt;-</span> <span class="va">emis_co2</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2030</span><span class="op">)</span></span>
<span></span>
<span><span class="va">CO2CAP</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newConstraint.html">newConstraint</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"CO2CAP"</span>,</span>
<span>  eq <span class="op">=</span> <span class="st">"&lt;="</span>,</span>
<span>  for.each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    <span class="co"># region = CO2_cap_national$V1,</span></span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2030</span><span class="op">:</span><span class="fl">2060</span><span class="op">)</span>,</span>
<span>    comm <span class="op">=</span> <span class="st">"CO2"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  term1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"vBalance"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2030</span>, <span class="fl">2060</span><span class="op">)</span>,</span>
<span>    rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">emis_co2_2030</span><span class="op">$</span><span class="va">value</span>, <span class="op">-</span><span class="fl">3</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">.1</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="cn">Inf</span></span>
<span><span class="op">)</span></span>
<span><span class="va">CO2CAP</span><span class="op">@</span><span class="va">rhs</span></span>
<span><span class="va">CO2CAP</span><span class="op">@</span><span class="va">defVal</span></span>
<span><span class="va">CO2CAP</span><span class="op">@</span><span class="va">interpolation</span></span>
<span></span>
<span><span class="va">CO2EXP</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newExport.html">newExport</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"CO2EXP"</span>, </span>
<span>  desc <span class="op">=</span> <span class="st">"CO2 price, 'export' if the reduction is not feasible below the price"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"CO2"</span>, </span>
<span>  exp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>price <span class="op">=</span> <span class="op">-</span><span class="fl">10000</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/progress.html">set_progress_bar</a></span><span class="op">(</span>show <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">scen_CO2CAP</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve.html">solve_model</a></span><span class="op">(</span></span>
<span>  <span class="va">mdl</span>, </span>
<span>  name <span class="op">=</span> <span class="st">"CO2CAP"</span>,</span>
<span>  <span class="va">CO2CAP</span>,</span>
<span>  <span class="va">CO2EXP</span>,</span>
<span>  tmp.del <span class="op">=</span> <span class="cn">F</span>, </span>
<span>  wait <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">getHorizon</span><span class="op">(</span><span class="va">scen_CO2CAP</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">scen_CO2CAP</span><span class="op">)</span></span>
<span><span class="va">scen_CO2CAP</span><span class="op">@</span><span class="va">misc</span><span class="op">$</span><span class="va">tmp.dir</span></span>
<span><span class="va">scen_CO2CAP</span><span class="op">@</span><span class="va">model</span><span class="op">@</span><span class="va">data</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">CO2CAP</span></span>
<span><span class="va">scen_CO2CAP</span><span class="op">@</span><span class="va">modInp</span><span class="op">@</span><span class="va">parameters</span><span class="op">$</span><span class="va">pCnsRhsCO2CAP</span></span>
<span></span>
<span><span class="fu"><a href="../reference/getData.html">getData</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">scen_BASE</span>, <span class="va">scen_CO2CAP</span><span class="op">)</span>, </span>
<span>        <span class="st">"vBalance"</span>, comm <span class="op">=</span> <span class="st">"CO2"</span>, merge <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">scenario</span>, <span class="va">comm</span>, <span class="va">year</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">value</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/getData.html">getData</a></span><span class="op">(</span><span class="va">scen_CO2CAP</span>, <span class="st">"vEmsFuelTot"</span>, comm <span class="op">=</span> <span class="st">"CO2"</span>, merge <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">scenario</span>, <span class="va">comm</span>, <span class="va">year</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">value</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="../reference/getData.html">getData</a></span><span class="op">(</span><span class="va">scen_CO2CAP</span>, <span class="st">"vExportRow"</span>, comm <span class="op">=</span> <span class="st">"CO2"</span>, merge <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>  </span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">comm</th>
<th align="right">year</th>
<th align="right">BASE</th>
<th align="right">CO2CAP</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CO2</td>
<td align="right">2015</td>
<td align="right">18471.36</td>
<td align="right">18471.36</td>
</tr>
<tr class="even">
<td align="left">CO2</td>
<td align="right">2016</td>
<td align="right">20010.38</td>
<td align="right">20010.38</td>
</tr>
<tr class="odd">
<td align="left">CO2</td>
<td align="right">2020</td>
<td align="right">26534.72</td>
<td align="right">26534.72</td>
</tr>
<tr class="even">
<td align="left">CO2</td>
<td align="right">2025</td>
<td align="right">25997.54</td>
<td align="right">25997.54</td>
</tr>
<tr class="odd">
<td align="left">CO2</td>
<td align="right">2030</td>
<td align="right">32185.86</td>
<td align="right">21173.63</td>
</tr>
<tr class="even">
<td align="left">CO2</td>
<td align="right">2035</td>
<td align="right">37165.60</td>
<td align="right">21836.34</td>
</tr>
<tr class="odd">
<td align="left">CO2</td>
<td align="right">2040</td>
<td align="right">40056.46</td>
<td align="right">21166.94</td>
</tr>
<tr class="even">
<td align="left">CO2</td>
<td align="right">2045</td>
<td align="right">43400.22</td>
<td align="right">17600.00</td>
</tr>
<tr class="odd">
<td align="left">CO2</td>
<td align="right">2050</td>
<td align="right">47562.84</td>
<td align="right">12800.00</td>
</tr>
<tr class="even">
<td align="left">CO2</td>
<td align="right">2055</td>
<td align="right">51795.35</td>
<td align="right">8000.00</td>
</tr>
</tbody>
</table>
<p>tbc…</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>energyRt</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
